(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,n,r,o){var i=o.handleCardClick,a=o.handleDelIconClick,u=o.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._name=t.name,this._link=t.link,this._template=document.querySelector(r),this._handleCardClick=i,this._handleDelIconClick=a,this._handleLikeClick=u,this._myId=n,this._ownerId=t.owner._id,this.cardId=t._id}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return this._template.content.querySelector(".item").cloneNode(!0)}},{key:"_removeButtonTrash",value:function(){this._delButton.style.display="none"}},{key:"generateCard",value:function(){return this._item=this._getTemplate(),this._delButton=this._item.querySelector(".item__delete"),this._likeButton=this._item.querySelector(".item__like"),this._ownerId!==this._myId&&this._removeButtonTrash(),this.checkStatusLike()&&this._changeColorLike(),this._cardImage=this._item.querySelector(".item__picture"),this._likesCount=this._item.querySelector(".item__like-count"),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setLikeCount(this._data.likes),this._item.querySelector(".item__title").textContent=this._name,this._item}},{key:"_setEventListeners",value:function(){var t=this;this._item.contains(this._delButton)&&this._delButton.addEventListener("click",(function(){return t._handleDelIconClick({id:t.cardId,removeItem:function(){return t._removeItem()}})})),this._likeButton.addEventListener("click",(function(){return t._handleLikeClick(t._data)})),this._cardImage.addEventListener("click",this._handleCardClick)}},{key:"_removeItem",value:function(){this._item.remove(),this._item=null}},{key:"checkStatusLike",value:function(){var t=this;return this._data.likes.some((function(e){return e._id===t._myId}))}},{key:"_changeColorLike",value:function(){this._likeButton.classList.toggle("item__like_active")}},{key:"_setLikeCount",value:function(){this._likesCount.textContent=this._data.likes.length}},{key:"updateData",value:function(t){this._data.likes=t.likes}},{key:"toggleLike",value:function(){this._changeColorLike(),this._setLikeCount()}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e,n){var r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(){return i._inputList.some((function(t){return!t.validity.valid}))},(r="_hasInvalidInput")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._config=e,this._formForValid=n,this._buttonSubmit=n.querySelector(e.buttonSubmit),this._inputList=Array.from(n.querySelectorAll(e.inputClass))}var e,r;return e=t,(r=[{key:"enableValidation",value:function(){this._setEventListener()}},{key:"_setEventListener",value:function(){var t=this;this._formForValid.addEventListener("input",(function(e){return t._handleInputForm(e)})),this._formForValid.addEventListener("submit",(function(t){t.preventDefault()}))}},{key:"_handleInputForm",value:function(t){var e=t.target;this._toggleButtonState(),this._checkInputValidity(e)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInpuError(t):this._showInputErorr(t)}},{key:"_setActiveButtonState",value:function(){this._buttonSubmit.classList.remove(this._config.buttonSubmitInactiveClass),this._buttonSubmit.removeAttribute("disabled")}},{key:"_setInactiveButtonState",value:function(){this._buttonSubmit.classList.add(this._config.buttonSubmitInactiveClass),this._buttonSubmit.setAttribute("disabled","true")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._setInactiveButtonState():this._setActiveButtonState()}},{key:"_showInputErorr",value:function(t){var e=this._formForValid.querySelector("#".concat(t.id,"-error"));t.classList.add(this._config.inputErrorClass),e.textContent=t.validationMessage}},{key:"_hideInpuError",value:function(t){var e=this._formForValid.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._config.inputErrorClass),e.textContent=""}},{key:"validBeforeOpenForm",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInpuError(e)})),this._toggleButtonState()}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){t.forEach(this._renderer)}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(e),this._handleOutsideClickClose=this._handleOutsideClickClose.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this.setEventListeners(),this._popupElement.classList.add("popup_opened")}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),this.delEventListeners()}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"_handleOutsideClickClose",value:function(t){(t.target===this._popupElement||t.target.classList.contains("popup__button-close"))&&this.close()}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("click",this._handleOutsideClickClose)}},{key:"delEventListeners",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("click",this._handleOutsideClickClose)}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=f(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},s.apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function h(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"open",value:function(t){var e=this._popupElement.querySelector(".popup__image"),n=this._popupElement.querySelector(".popup__heading-image");e.src=t.link,e.alt=t.name,n.textContent=t.name,s(d(a.prototype),"open",this).call(this)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=v(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},m.apply(this,arguments)}function v(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}function k(t,e){return k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},k(t,e)}function g(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function a(t,e){var n,r=e.callbackSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._callbackSubmit=r,n._form=n._popupElement.querySelector(".form-group"),n._buttonSubmit=n._form.querySelector(".form-group__button-save"),n}return e=a,(n=[{key:"_getInputValues",value:function(){return this._inputList=Array.from(this._popupElement.querySelectorAll(".form-group__item")),this._inputListValues=this._inputList.reduce((function(t,e){return t[e.name]=e.value,t}),{}),this._inputListValues}},{key:"setEventListeners",value:function(){var t=this;this._listener=function(){t._callbackSubmit({data:t._getInputValues(),button:t._buttonSubmit})},this._form.addEventListener("submit",this._listener),m(S(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){m(S(a.prototype),"close",this).call(this),this._form.reset()}},{key:"delEventListeners",value:function(){this._form.removeEventListener("submit",this._listener),m(S(a.prototype),"delEventListeners",this).call(this)}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=L(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function L(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}function I(t,e){return I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},I(t,e)}function j(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return j(this,t)});function a(t,e){var n,r=e.callbackSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._callbackSubmit=r,n._form=n._popupElement.querySelector(".form-group"),n._buttonSubmit=n._form.querySelector(".form-group__button-save"),n}return e=a,(n=[{key:"open",value:function(t){this._data=t,O(P(a.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;this._listener=function(e){e.preventDefault(),t._callbackSubmit({data:t._data,button:t._buttonSubmit})},this._form.addEventListener("submit",this._listener),O(P(a.prototype),"setEventListeners",this).call(this)}},{key:"delEventListeners",value:function(){this._form.removeEventListener("submit",this._listener),O(P(a.prototype),"delEventListeners",this).call(this)}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameProfile=document.querySelector(e.profileName),this._aboutProfile=document.querySelector(e.profileAbout),this._profileAvatar=document.querySelector(e.profileAvatar)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._nameProfile.textContent,about:this._aboutProfile.textContent,avatar:this._profileAvatar}}},{key:"setUserInfo",value:function(t){this._nameProfile.textContent=t.name,this._aboutProfile.textContent=t.about,this._profileAvatar.style.backgroundImage="url(".concat(t.avatar,")")}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._handleResponse)}},{key:"getAllData",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}},{key:"changeUserInfo",value:function(t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then(this._handleResponse)}},{key:"addCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(t)}).then(this._handleResponse)}},{key:"delCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"toggleLike",value:function(t,e){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:e?"DELETE":"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"changeAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then(this._handleResponse)}}])&&A(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),x=document.querySelector(".popup_button_reduct"),U=document.querySelector(".info__button-reduct"),D=x.querySelector(".form-group"),V=D.querySelector(".form-group__item_el_name"),F=D.querySelector(".form-group__item_el_job"),N=document.querySelector(".profile__add-button"),J=document.querySelector(".popup_button_add-item").querySelector(".form-group"),G=document.querySelector(".popup_button_change-avatar"),H=document.querySelector(".profile__avatar"),M=G.querySelector(".form-group"),z={buttonSubmit:".form-group__button-save",inputClass:".form-group__item",inputErrorClass:"form-group__item_error",buttonSubmitInactiveClass:"form-group__button-save_inactive"};function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var K=new B({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"5f54aa7b-f781-4bbd-a84a-c9d65d5c54ef","Content-Type":"application/json"}}),Q=new r(z,D),W=new r(z,J),X=new r(z,M),Y=new y(".popup_content_image"),Z=new T({profileName:".info__name",profileAbout:".info__about",profileAvatar:".profile__avatar"}),tt=new w(".popup_button_reduct",{callbackSubmit:function(t){t.button.textContent="Сохранение...",K.changeUserInfo(t.data).then((function(t){Z.setUserInfo(t),tt.close()})).finally((function(){return t.button.textContent="Сохранить"})).catch((function(t){return console.log(t)}))}}),et="",nt=function(t){var n=new e(t,et,".template-item",{handleCardClick:function(){Y.open(t)},handleDelIconClick:function(t){it.open(t)},handleLikeClick:function(t){K.toggleLike(t._id,n.checkStatusLike()).then((function(t){n.updateData(t),n.toggleLike()})).catch((function(t){return console.log(t)}))}});return n.generateCard()},rt=new i({renderer:function(t){rt.addItem(nt(t))}},".cards");K.getAllData().then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];et=i._id,Z.setUserInfo(i),rt.renderItems(o)})).catch((function(t){return console.log(t)})),U.addEventListener("click",(function(){Q.validBeforeOpenForm();var t=Z.getUserInfo(),e=t.name,n=t.about;V.value=e,F.value=n,tt.open()}));var ot=new w(".popup_button_change-avatar",{callbackSubmit:function(t){t.button.textContent="Сохранение...",K.changeAvatar(t.data).then((function(t){Z.setUserInfo(t),ot.close()})).finally((function(){return t.button.textContent="Сохранение"})).catch((function(t){return console.log(t)}))}});H.addEventListener("click",(function(){X.validBeforeOpenForm(),ot.open()}));var it=new R(".popup_button_confirm-del",{callbackSubmit:function(t){t.button.textContent="Удаление...",K.delCard(t.data.id).then((function(){t.data.removeItem(),it.close()})).finally((function(){return t.button.textContent="Да"})).catch((function(t){return console.log(t)}))}}),at=new w(".popup_button_add-item",{callbackSubmit:function(t){var e=t.data,n=t.button;n.textContent="Сохранение...",K.addCard({name:e.title,link:e.link}).then((function(t){rt.addItem(nt(t)),at.close()})).finally((function(){return n.textContent="Создать"})).catch((function(t){return console.log(t)}))}});N.addEventListener("click",(function(){W.validBeforeOpenForm(),at.open()})),Q.enableValidation(),W.enableValidation(),X.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZmpCLEVBQXNCc0MsbUJBQ3RCckMsRUFBc0JxQyxtQkFDdEJwQyxFQUEyQm9DLG9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBpZCwgdGVtcGxhdGVTZWxlY3RvciwgeyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbEljb25DbGljaywgaGFuZGxlTGlrZUNsaWNrIH0pIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxJY29uQ2xpY2sgPSBoYW5kbGVEZWxJY29uQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX215SWQgPSBpZDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5jYXJkSWQgPSBkYXRhLl9pZDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1cIikuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgX3JlbW92ZUJ1dHRvblRyYXNoKCkge1xuICAgIHRoaXMuX2RlbEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5faXRlbSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZGVsQnV0dG9uID0gdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX2RlbGV0ZVwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX2xpa2VcIik7XG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX215SWQpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUJ1dHRvblRyYXNoKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmNoZWNrU3RhdHVzTGlrZSgpKSB7XG4gICAgICB0aGlzLl9jaGFuZ2VDb2xvckxpa2UoKTtcbiAgICB9XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX3BpY3R1cmVcIik7XG4gICAgdGhpcy5fbGlrZXNDb3VudCA9IHRoaXMuX2l0ZW0ucXVlcnlTZWxlY3RvcihcIi5pdGVtX19saWtlLWNvdW50XCIpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0TGlrZUNvdW50KHRoaXMuX2RhdGEubGlrZXMpO1xuICAgIHRoaXMuX2l0ZW0ucXVlcnlTZWxlY3RvcihcIi5pdGVtX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgcmV0dXJuIHRoaXMuX2l0ZW07XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMuX2l0ZW0uY29udGFpbnModGhpcy5fZGVsQnV0dG9uKSkge1xuICAgICAgdGhpcy5fZGVsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxJY29uQ2xpY2soe1xuICAgICAgICAgIGlkOiB0aGlzLmNhcmRJZCxcbiAgICAgICAgICByZW1vdmVJdGVtOiAoKSA9PiB0aGlzLl9yZW1vdmVJdGVtKCksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5fZGF0YSkpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcbiAgfVxuXG4gIF9yZW1vdmVJdGVtKCkge1xuICAgIHRoaXMuX2l0ZW0ucmVtb3ZlKCk7XG4gICAgdGhpcy5faXRlbSA9IG51bGw7XG4gIH1cblxuICBjaGVja1N0YXR1c0xpa2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEubGlrZXMuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX215SWQpO1xuICB9XG5cbiAgX2NoYW5nZUNvbG9yTGlrZSgpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJpdGVtX19saWtlX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9zZXRMaWtlQ291bnQoKSB7XG4gICAgdGhpcy5fbGlrZXNDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgdXBkYXRlRGF0YShkYXRhKSB7XG4gICAgdGhpcy5fZGF0YS5saWtlcyA9IGRhdGEubGlrZXM7XG4gIH1cblxuICB0b2dnbGVMaWtlKCkge1xuICAgIHRoaXMuX2NoYW5nZUNvbG9yTGlrZSgpO1xuICAgIHRoaXMuX3NldExpa2VDb3VudCgpO1xuICB9XG59XG5cbmV4cG9ydCB7IENhcmQgfTtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1Gb3JWYWxpZCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRm9yVmFsaWQgPSBmb3JtRm9yVmFsaWQ7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gZm9ybUZvclZhbGlkLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmJ1dHRvblN1Ym1pdCk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRm9yVmFsaWQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRDbGFzcykpO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLl9mb3JtRm9yVmFsaWQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHRoaXMuX2hhbmRsZUlucHV0Rm9ybShldnQpKTtcbiAgICB0aGlzLl9mb3JtRm9yVmFsaWQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVJbnB1dEZvcm0oZXZ0KSB7XG4gICAgY29uc3QgaW5wdXQgPSBldnQudGFyZ2V0O1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcbiAgICBjb25zdCBpc1ZhbGlkSW5wdXQgPSBpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgICBpZiAoIWlzVmFsaWRJbnB1dCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJvcnIoaW5wdXQpO1xuICAgIH0gZWxzZSB0aGlzLl9oaWRlSW5wdUVycm9yKGlucHV0KTtcbiAgfVxuXG4gIF9zZXRBY3RpdmVCdXR0b25TdGF0ZSgpIHtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuYnV0dG9uU3VibWl0SW5hY3RpdmVDbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICB9XG5cbiAgX3NldEluYWN0aXZlQnV0dG9uU3RhdGUoKSB7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmJ1dHRvblN1Ym1pdEluYWN0aXZlQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fc2V0QWN0aXZlQnV0dG9uU3RhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2V0SW5hY3RpdmVCdXR0b25TdGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRFcm9ycihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1Gb3JWYWxpZC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICB9XG5cbiAgX2hpZGVJbnB1RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRm9yVmFsaWQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuICB2YWxpZEJlZm9yZU9wZW5Gb3JtKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHVFcnJvcihpbnB1dCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBGb3JtVmFsaWRhdG9yIH07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGRhdGEpIHtcbiAgICBkYXRhLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZU91dHNpZGVDbGlja0Nsb3NlID0gdGhpcy5faGFuZGxlT3V0c2lkZUNsaWNrQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIHRoaXMuZGVsRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBfaGFuZGxlT3V0c2lkZUNsaWNrQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19idXR0b24tY2xvc2VcIikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVPdXRzaWRlQ2xpY2tDbG9zZSk7XG4gIH1cblxuICBkZWxFdmVudExpc3RlbmVycygpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVPdXRzaWRlQ2xpY2tDbG9zZSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIGNvbnN0IGJpZ1NpemVQaWN0dXJlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIGNvbnN0IHBvcHVwSW1hZ2VIZWFkaW5nID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2hlYWRpbmctaW1hZ2VcIik7XG4gICAgYmlnU2l6ZVBpY3R1cmUuc3JjID0gZGF0YS5saW5rO1xuICAgIGJpZ1NpemVQaWN0dXJlLmFsdCA9IGRhdGEubmFtZTtcbiAgICBwb3B1cEltYWdlSGVhZGluZy50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBjYWxsYmFja1N1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FsbGJhY2tTdWJtaXQgPSBjYWxsYmFja1N1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1ncm91cFwiKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1ncm91cF9fYnV0dG9uLXNhdmVcIik7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtLWdyb3VwX19pdGVtXCIpKTtcbiAgICB0aGlzLl9pbnB1dExpc3RWYWx1ZXMgPSB0aGlzLl9pbnB1dExpc3QucmVkdWNlKChyZXN1bHQsIGl0ZW0pID0+IHtcbiAgICAgIHJlc3VsdFtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwge30pO1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3RWYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIHRoaXMuX2NhbGxiYWNrU3VibWl0KHtcbiAgICAgICAgZGF0YTogdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSxcbiAgICAgICAgYnV0dG9uOiB0aGlzLl9idXR0b25TdWJtaXQsXG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9saXN0ZW5lcik7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgZGVsRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2xpc3RlbmVyKTtcbiAgICBzdXBlci5kZWxFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBjYWxsYmFja1N1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FsbGJhY2tTdWJtaXQgPSBjYWxsYmFja1N1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1ncm91cFwiKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1ncm91cF9fYnV0dG9uLXNhdmVcIik7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saXN0ZW5lciA9IChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fY2FsbGJhY2tTdWJtaXQoeyBkYXRhOiB0aGlzLl9kYXRhLCBidXR0b246IHRoaXMuX2J1dHRvblN1Ym1pdCB9KTtcbiAgICB9O1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9saXN0ZW5lcik7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGRlbEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9saXN0ZW5lcik7XG4gICAgc3VwZXIuZGVsRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihwcm9maWxlSW5mb1NlbGVjdG9ycykge1xuICAgIHRoaXMuX25hbWVQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSW5mb1NlbGVjdG9ycy5wcm9maWxlTmFtZSk7XG4gICAgdGhpcy5fYWJvdXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSW5mb1NlbGVjdG9ycy5wcm9maWxlQWJvdXQpO1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVJbmZvU2VsZWN0b3JzLnByb2ZpbGVBdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVQcm9maWxlLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0UHJvZmlsZS50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5fcHJvZmlsZUF2YXRhcixcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX25hbWVQcm9maWxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2Fib3V0UHJvZmlsZS50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7ZGF0YS5hdmF0YXJ9KWA7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBnZXRBbGxEYXRhKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VySW5mbygpXSk7XG4gIH1cblxuICBjaGFuZ2VVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBhZGRDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICB0b2dnbGVMaWtlKGlkLCBzdGF0dXMpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IHN0YXR1cyA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGNoYW5nZUF2YXRhcihkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG59XG4iLCJjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2J1dHRvbl9yZWR1Y3RcIik7XG5jb25zdCByZWR1Y3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmluZm9fX2J1dHRvbi1yZWR1Y3RcIik7XG5jb25zdCBwcm9maWxlRm9ybSA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tZ3JvdXBcIik7XG5jb25zdCBpbnB1dEZpcnNuYW1lID0gcHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtLWdyb3VwX19pdGVtX2VsX25hbWVcIik7XG5jb25zdCBpbnB1dEpvYiA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1ncm91cF9faXRlbV9lbF9qb2JcIik7XG5jb25zdCBidXR0b25BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgcG9wdXBBZGRJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9idXR0b25fYWRkLWl0ZW1cIik7XG5jb25zdCBjYXJkRm9ybSA9IHBvcHVwQWRkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tZ3JvdXBcIik7XG5jb25zdCBhdmF0YXJQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfYnV0dG9uX2NoYW5nZS1hdmF0YXJcIik7XG5jb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKVxuY29uc3QgYXZhdGFyRm9ybSA9IGF2YXRhclBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1ncm91cFwiKTtcbmNvbnN0IG9wdGlvbnMgPSB7XG4gIGJ1dHRvblN1Ym1pdDogXCIuZm9ybS1ncm91cF9fYnV0dG9uLXNhdmVcIixcbiAgaW5wdXRDbGFzczogXCIuZm9ybS1ncm91cF9faXRlbVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybS1ncm91cF9faXRlbV9lcnJvclwiLFxuICBidXR0b25TdWJtaXRJbmFjdGl2ZUNsYXNzOiBcImZvcm0tZ3JvdXBfX2J1dHRvbi1zYXZlX2luYWN0aXZlXCIsXG59O1xuXG5leHBvcnQge1xuICByZWR1Y3RCdXR0b24sXG4gIHByb2ZpbGVGb3JtLFxuICBpbnB1dEZpcnNuYW1lLFxuICBpbnB1dEpvYixcbiAgYnV0dG9uQWRkQ2FyZCxcbiAgY2FyZEZvcm0sXG4gIGF2YXRhckZvcm0sXG4gIG9wdGlvbnMsXG4gIGF2YXRhckJ1dHRvblxufTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7XG4gIHJlZHVjdEJ1dHRvbixcbiAgcHJvZmlsZUZvcm0sXG4gIGlucHV0Rmlyc25hbWUsXG4gIGlucHV0Sm9iLFxuICBidXR0b25BZGRDYXJkLFxuICBjYXJkRm9ybSxcbiAgYXZhdGFyRm9ybSxcbiAgb3B0aW9ucyxcbiAgYXZhdGFyQnV0dG9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy91dGlscy5qc1wiO1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI1ZjU0YWE3Yi1mNzgxLTRiYmQtYTg0YS1jOWQ2NWQ1YzU0ZWZcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCB2YWxpZGF0aW9uUHJvZmlsZUZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBwcm9maWxlRm9ybSk7XG5jb25zdCB2YWxpZGF0aW9uYWRkQ2FyZEZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBjYXJkRm9ybSk7XG5jb25zdCB2YWxpZGF0aW9uQ2hhbmdlQXZhdGFyRm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIGF2YXRhckZvcm0pO1xuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfY29udGVudF9pbWFnZVwiKTtcbmNvbnN0IHByb2ZpbGVJbmZvU2VsZWN0b3JzID0ge1xuICBwcm9maWxlTmFtZTogXCIuaW5mb19fbmFtZVwiLFxuICBwcm9maWxlQWJvdXQ6IFwiLmluZm9fX2Fib3V0XCIsXG4gIHByb2ZpbGVBdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxufTtcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVJbmZvU2VsZWN0b3JzKTtcblxuY29uc3QgcmVkdWN0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfYnV0dG9uX3JlZHVjdFwiLCB7XG4gIGNhbGxiYWNrU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIGRhdGEuYnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICAgIGFwaVxuICAgICAgLmNoYW5nZVVzZXJJbmZvKGRhdGEuZGF0YSlcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgICAgIHJlZHVjdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IChkYXRhLmJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpKVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9LFxufSk7XG5cbmxldCBteUlkID0gXCJcIjtcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgbXlJZCwgXCIudGVtcGxhdGUtaXRlbVwiLCB7XG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGl0ZW0pO1xuICAgIH0sXG4gICAgaGFuZGxlRGVsSWNvbkNsaWNrOiAoZGF0YSkgPT4ge1xuICAgICAgY29uZmlybURlbENhcmQub3BlbihkYXRhKTtcbiAgICB9LFxuICAgIGhhbmRsZUxpa2VDbGljazogKGNhbGxiYWNrQ2FyZCkgPT4ge1xuICAgICAgYXBpXG4gICAgICAgIC50b2dnbGVMaWtlKGNhbGxiYWNrQ2FyZC5faWQsIGNhcmQuY2hlY2tTdGF0dXNMaWtlKCkpXG4gICAgICAgIC50aGVuKChuZXdDYXJkKSA9PiB7XG4gICAgICAgICAgY2FyZC51cGRhdGVEYXRhKG5ld0NhcmQpO1xuICAgICAgICAgIGNhcmQudG9nZ2xlTGlrZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufTtcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNcIlxuKTtcblxuYXBpXG4gIC5nZXRBbGxEYXRhKClcbiAgLnRoZW4oKFtpbml0aWFsQ2FyZHMsIHNhdmVkVXNlckluZm9dKSA9PiB7XG4gICAgbXlJZCA9IHNhdmVkVXNlckluZm8uX2lkO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHNhdmVkVXNlckluZm8pO1xuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxucmVkdWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIHZhbGlkYXRpb25Qcm9maWxlRm9ybS52YWxpZEJlZm9yZU9wZW5Gb3JtKCk7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0Rmlyc25hbWUudmFsdWUgPSBuYW1lO1xuICBpbnB1dEpvYi52YWx1ZSA9IGFib3V0O1xuICByZWR1Y3RQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbmNvbnN0IGNoYW5nZUF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfYnV0dG9uX2NoYW5nZS1hdmF0YXJcIiwge1xuICBjYWxsYmFja1N1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBkYXRhLmJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcbiAgICBhcGlcbiAgICAgIC5jaGFuZ2VBdmF0YXIoZGF0YS5kYXRhKVxuICAgICAgLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oY2FyZCk7XG4gICAgICAgIGNoYW5nZUF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4gKGRhdGEuYnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtVwiKSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfSxcbn0pO1xuXG5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgdmFsaWRhdGlvbkNoYW5nZUF2YXRhckZvcm0udmFsaWRCZWZvcmVPcGVuRm9ybSgpO1xuICBjaGFuZ2VBdmF0YXJQb3B1cC5vcGVuKCk7XG59KTtcblxuY29uc3QgY29uZmlybURlbENhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcIi5wb3B1cF9idXR0b25fY29uZmlybS1kZWxcIiwge1xuICBjYWxsYmFja1N1Ym1pdDogKGNhbGxiYWNrRGF0YSkgPT4ge1xuICAgIGNhbGxiYWNrRGF0YS5idXR0b24udGV4dENvbnRlbnQgPSBcItCj0LTQsNC70LXQvdC40LUuLi5cIjtcbiAgICBhcGlcbiAgICAgIC5kZWxDYXJkKGNhbGxiYWNrRGF0YS5kYXRhLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYWxsYmFja0RhdGEuZGF0YS5yZW1vdmVJdGVtKCk7XG4gICAgICAgIGNvbmZpcm1EZWxDYXJkLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4gKGNhbGxiYWNrRGF0YS5idXR0b24udGV4dENvbnRlbnQgPSBcItCU0LBcIikpXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH0sXG59KTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfYnV0dG9uX2FkZC1pdGVtXCIsIHtcbiAgY2FsbGJhY2tTdWJtaXQ6ICh7IGRhdGEsIGJ1dHRvbiB9KSA9PiB7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICAgIGFwaVxuICAgICAgLmFkZENhcmQoeyBuYW1lOiBkYXRhLnRpdGxlLCBsaW5rOiBkYXRhLmxpbmsgfSlcbiAgICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkKSk7XG4gICAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IChidXR0b24udGV4dENvbnRlbnQgPSBcItCh0L7Qt9C00LDRgtGMXCIpKVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9LFxufSk7XG5cbmJ1dHRvbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgdmFsaWRhdGlvbmFkZENhcmRGb3JtLnZhbGlkQmVmb3JlT3BlbkZvcm0oKTtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG52YWxpZGF0aW9uUHJvZmlsZUZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xudmFsaWRhdGlvbmFkZENhcmRGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRpb25DaGFuZ2VBdmF0YXJGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsImlkIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbEljb25DbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfZGF0YSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsSWNvbkNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9teUlkIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsImNhcmRJZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZGVsQnV0dG9uIiwic3R5bGUiLCJkaXNwbGF5IiwiX2l0ZW0iLCJfZ2V0VGVtcGxhdGUiLCJfbGlrZUJ1dHRvbiIsIl9yZW1vdmVCdXR0b25UcmFzaCIsImNoZWNrU3RhdHVzTGlrZSIsIl9jaGFuZ2VDb2xvckxpa2UiLCJfY2FyZEltYWdlIiwiX2xpa2VzQ291bnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJfc2V0TGlrZUNvdW50IiwibGlrZXMiLCJ0ZXh0Q29udGVudCIsImNvbnRhaW5zIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUl0ZW0iLCJfcmVtb3ZlSXRlbSIsInJlbW92ZSIsInNvbWUiLCJpdGVtIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwibGVuZ3RoIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1Gb3JWYWxpZCIsIl9pbnB1dExpc3QiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfY29uZmlnIiwiX2Zvcm1Gb3JWYWxpZCIsIl9idXR0b25TdWJtaXQiLCJidXR0b25TdWJtaXQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRDbGFzcyIsIl9zZXRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX2hhbmRsZUlucHV0Rm9ybSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9oaWRlSW5wdUVycm9yIiwiX3Nob3dJbnB1dEVyb3JyIiwiYnV0dG9uU3VibWl0SW5hY3RpdmVDbGFzcyIsInJlbW92ZUF0dHJpYnV0ZSIsImFkZCIsInNldEF0dHJpYnV0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc2V0SW5hY3RpdmVCdXR0b25TdGF0ZSIsIl9zZXRBY3RpdmVCdXR0b25TdGF0ZSIsImVycm9yTWVzc2FnZSIsImlucHV0RXJyb3JDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwiZm9yRWFjaCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVPdXRzaWRlQ2xpY2tDbG9zZSIsImJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJzZXRFdmVudExpc3RlbmVycyIsImRlbEV2ZW50TGlzdGVuZXJzIiwia2V5IiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoSW1hZ2UiLCJiaWdTaXplUGljdHVyZSIsInBvcHVwSW1hZ2VIZWFkaW5nIiwiUG9wdXBXaXRoRm9ybSIsImNhbGxiYWNrU3VibWl0IiwiX2NhbGxiYWNrU3VibWl0IiwiX2Zvcm0iLCJfaW5wdXRMaXN0VmFsdWVzIiwicmVkdWNlIiwicmVzdWx0IiwidmFsdWUiLCJfbGlzdGVuZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJidXR0b24iLCJyZXNldCIsIlBvcHVwV2l0aENvbmZpcm0iLCJVc2VySW5mbyIsInByb2ZpbGVJbmZvU2VsZWN0b3JzIiwiX25hbWVQcm9maWxlIiwicHJvZmlsZU5hbWUiLCJfYWJvdXRQcm9maWxlIiwicHJvZmlsZUFib3V0IiwiX3Byb2ZpbGVBdmF0YXIiLCJwcm9maWxlQXZhdGFyIiwiYWJvdXQiLCJhdmF0YXIiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9oYW5kbGVSZXNwb25zZSIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwb3B1cFByb2ZpbGUiLCJyZWR1Y3RCdXR0b24iLCJwcm9maWxlRm9ybSIsImlucHV0Rmlyc25hbWUiLCJpbnB1dEpvYiIsImJ1dHRvbkFkZENhcmQiLCJjYXJkRm9ybSIsImF2YXRhclBvcHVwIiwiYXZhdGFyQnV0dG9uIiwiYXZhdGFyRm9ybSIsImFwaSIsImF1dGhvcml6YXRpb24iLCJ2YWxpZGF0aW9uUHJvZmlsZUZvcm0iLCJ2YWxpZGF0aW9uYWRkQ2FyZEZvcm0iLCJ2YWxpZGF0aW9uQ2hhbmdlQXZhdGFyRm9ybSIsInBvcHVwV2l0aEltYWdlIiwidXNlckluZm8iLCJyZWR1Y3RQcm9maWxlUG9wdXAiLCJjaGFuZ2VVc2VySW5mbyIsInVzZXJEYXRhIiwic2V0VXNlckluZm8iLCJmaW5hbGx5IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwibXlJZCIsImNyZWF0ZUNhcmQiLCJjYXJkIiwib3BlbiIsImNvbmZpcm1EZWxDYXJkIiwiY2FsbGJhY2tDYXJkIiwidG9nZ2xlTGlrZSIsIm5ld0NhcmQiLCJ1cGRhdGVEYXRhIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwiZ2V0QWxsRGF0YSIsImluaXRpYWxDYXJkcyIsInNhdmVkVXNlckluZm8iLCJyZW5kZXJJdGVtcyIsInZhbGlkQmVmb3JlT3BlbkZvcm0iLCJjaGFuZ2VBdmF0YXJQb3B1cCIsImNoYW5nZUF2YXRhciIsImNhbGxiYWNrRGF0YSIsImRlbENhcmQiLCJhZGRDYXJkUG9wdXAiLCJhZGRDYXJkIiwidGl0bGUiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==